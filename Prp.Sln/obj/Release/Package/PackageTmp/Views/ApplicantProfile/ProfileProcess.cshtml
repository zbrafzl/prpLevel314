
@{
    ViewBag.Title = "Applicant Profile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model Prp.Sln.ProfileModelEmpty

@section RenderCss{
    <link href="/assets/css/BreadCrumb.css" rel="stylesheet" />
}
@section RenderScript{

    <script>

        var applicantId = 0, applicantDetailId = 0, objApplicant = {}, objApplicantInfo = {}, objApplicantInfoDualNational = {},
            imagesPath = "", districtListAll = [], countryList = [], dualNationalityType = 1, countryId = 132;

        var identityType = "CNIC";

        $(document).ready(function () {

            applicantId = ConvertToInt($("#hfdApplicantId").val());
            imagesPath = "/Images/Applicant/" + applicantId + "/";
            dualNationalityType = 1

            SetDatePicker("#txtDob", "90y", "-20y", "-1");
            SetDatePicker("#txtDateOfPassingMBBS", "10y", "", "-1");
            SetDatePicker("#txtExpiryDatePMDC", "", "7y", "-1");
            SetDatePicker("#txtCNICExpiryDate", "", "10y", "-1");


            $(document).on('change', 'input:radio[name="rbtndisable"]', function () {
                DisableChangeEvent();
            });


            $(document).keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '13') {
                    SaveAndProceed();
                }
            });

            //GetApplicantProfileInfo();
            ProfileProcessGetInfo();

        });

        var listRegion = [], listCountry = [];
        function ProfileProcessGetInfo() {

            listRegion = [];
            var resp = ProfileProcessGetInfoByParam(1);
            try {
                if (resp != null) {

                    listRegion = resp.Table6;
                    BindFormPreInit();

                    objApplicant = resp.Table21[0];
                    BindApplicantInfo(objApplicant);

                    objApplicantInfo = resp.Table25[0];
                    BindProfileInfo(objApplicantInfo);

                    objApplicantInfoDualNational = resp.Table27[0];
                    BindApplicantInfoDualNational();
                }
            } catch (e) {
            }

            TrimLengthCtrl();
        }

        function BindFormPreInit() {

            listCountry = $.grep(listRegion, function (n, i) {
                return n.typeId == 1;
            });
            //Country of Graduation
            DDLBindList("#ddlCountryDegree", listCountry, "Select One", 0);

            //Nationality of Applicant
            DDLBindList("#ddlCountry", listCountry, "Select One", 0);

            var listProvince = $.grep(listRegion, function (n, i) {
                return n.parentId == 132;
            });
            DDLBindList("#ddlDomicileProvince", listProvince, "Select One", 0);

        }

        function BindApplicantInfo(objApplicant) {

            $("#txtName").val(objApplicant.name);
            $("#txtEmail").val(objApplicant.emailId);
            $("#txtPMDCNo").val(objApplicant.pmdcNo);
            $("#txtContactNo").val(objApplicant.contactNumber);
        }

        function BindProfileInfo(objApplicantInfo) {

            try {
                applicantDetailId = objApplicantInfo.applicantDetailId;
            } catch (e) {
                applicantDetailId = 0
            }
            if (applicantDetailId > 0) {

                applicantDetailId = objApplicantInfo.applicantDetailId;
                $("#txtFatherName").val(objApplicantInfo.fatherName);
                $("#ddlGender").val(objApplicantInfo.genderId);
                //$("#txtDob").val(objApplicantInfo.bod);
                $("#txtDob").val(ToDateFormatDDMMYYYWithSlash(objApplicantInfo.dob));
                $("#txtExpiryDatePMDC").val(ToDateFormatDDMMYYYWithSlash(objApplicantInfo.pmdcExpiryDate));
                $("#txtDateOfPassingMBBS").val(ToDateFormatDDMMYYYWithSlash(objApplicantInfo.mbbsPassingDate));
                $("#ddlCountryDegree").val(objApplicantInfo.countryIdDegreePassing);

                if (objApplicantInfo.dualNationalityType == 1) {
                    $("#rbtnNationalityTypeSingle").prop("checked", true);
                    $("#rbtnNationalityTypeSingle").change();
                }
                else if (objApplicantInfo.dualNationalityType == 2) {
                    $("#rbtnNationalityTypeDual").prop("checked", true);
                    $("#rbtnNationalityTypeDual").change();
                }


                $("#ddlCountry").val(objApplicantInfo.countryId);
                BindDistrictDDL(0, objApplicantInfo.districtId);
                CountryChangeEvent();

                $("#divDDLDistrict").hide();
                $("#divTxtDistrict").hide();
                $(".divDomicile").hide();

                $(".spnCnic").html("CNIC");
                $("#spnCnicUpload1").html("CNIC Front side Image");
                $("#spnCnicUpload2").html("CNIC Back side Image");

                if (objApplicantInfo.countryId == 132) {
                    // For Pakistan
                    $("#divDDLDistrict").show();
                    $(".divDomicile").show();
                    $(".spnCnic").html("CNIC");

                    identityType = "CNIC";

                    $("#spnCnicUpload1").html("CNIC Front side Image");
                    $("#spnCnicUpload2").html("CNIC Back side Image");


                    if (objApplicantInfo.domicileProvinceId == 0)
                        objApplicantInfo.domicileProvinceId = 196; // punjab

                    $("#ddlDomicileProvince").val(objApplicantInfo.domicileProvinceId);

                    DDLSetToDefault("ddlDomicileDistrict", 'Select One', 0);
                    BindDistrictDDLDomicile(objApplicantInfo.domicileProvinceId, objApplicantInfo.domicileDistrictId);
                    $("#ddlDomicileDistrict").val(objApplicantInfo.domicileDistrictId);
                }
                else {

                    $("#spnCnicUpload1").html("Passport 1st Page");
                    $("#spnCnicUpload2").html("Passport 2nd Page");

                    identityType = "Passport";

                    $(".spnCnic").html("Passport");
                    $("#divTxtDistrict").show();
                    $("#txtDistrict").val(objApplicantInfo.districtName);
                }

                $("#txtAddress").val(objApplicantInfo.address);
                $("#txtCNIC").val(objApplicantInfo.cnicNo);
                $("#txtCNICExpiryDate").val(ToDateFormatDDMMYYYWithSlash(objApplicantInfo.cnicExpiryDate));


                $("#hfdCnicFront").val("");
                if (objApplicantInfo.cnicPicFront.length > 0) {

                    $('#imgCnicFront').attr('src', imagesPath + objApplicantInfo.cnicPicFront);
                    $('#imgCnicFront').show();
                    $('#rmvCnicFront').show();
                    $("#hfdCnicFront").val(objApplicantInfo.cnicPicFront);
                }

                $("#hfdCnicBack").val("");
                if (objApplicantInfo.cnicPicFront.length > 0) {

                    $('#imgCnicBack').attr('src', imagesPath + objApplicantInfo.cnicPicBack);
                    $('#imgCnicBack').show();
                    $('#rmvCnicBack').show();
                    $("#hfdCnicBack").val(objApplicantInfo.cnicPicBack);
                }

                $("#hfdDomicileFront").val("");
                if (objApplicantInfo.domicilePicFront.length > 0) {
                    $('#imgDomicileFront').attr('src', imagesPath + objApplicantInfo.domicilePicFront);
                    $('#imgDomicileFront').show();
                    $('#rmvDomicileFront').show();
                    $("#hfdDomicileFront").val(objApplicantInfo.domicilePicFront);
                }

                $("#hfdDomicileBack").val("");
                if (objApplicantInfo.domicilePicBack.length > 0) {
                    $('#imgDomicileBack').attr('src', imagesPath + objApplicantInfo.domicilePicBack);
                    $('#imgDomicileBack').show();
                    $('#rmvDomicileBack').show();
                    $("#hfdDomicileBack").val(objApplicantInfo.domicilePicBack);
                }

                $("#hfdPic").val("");
                if (objApplicant.pic.length > 0) {
                    $('#imgPic').attr('src', imagesPath + objApplicant.pic);
                    $('#imgPic').show();
                    $('#rmvPic').show();
                    $("#hfdPic").val(objApplicant.pic);
                }

                $("#divDisable").hide();
                $("#divDisableRadio").hide();
                if (objApplicantInfo.domicileProvinceId == 196) {

                    $("#divDisableRadio").show();

                    if (objApplicantInfo.disableId == 2) {

                        $("#divDisable").show();
                        $("#rbtnDisableYes").attr("checked", "checked");


                        $("#hfdDisable").val("");
                        if (objApplicantInfo.disableImage.length > 0) {
                            $('#imgDisable').attr('src', imagesPath + objApplicantInfo.disableImage);
                            $('#imgDisable').show();
                            $('#rmvDisable').show();
                            $("#hfdDisable").val(objApplicantInfo.disableImage);
                        }
                    }
                    else
                        $("#rbtnDisableNo").attr("checked", "checked");
                }

            }
            else {
                // New applicant
                $("#ddlCountryDegree").val(132);// Pakistan=132

                $("#ddlDomicileProvince").val(196);// Punjab=196

                DDLSetToDefault("ddlDistrict", 'Select One', 0);
                BindDistrictDDL(0, 0);
                DDLSetToDefault("ddlDomicileDistrict", 'Select One', 0);
                BindDistrictDDLDomicile(196, 0);
                BindDistrictDDL(132, 0);

                $("#rbtnNationalityTypeSingle").prop("checked", true);
                $("#rbtnNationalityTypeSingle").change();
                $("#ddlCountry").val(132);
                $("#rbtnDisableNo").prop("checked", true);
                $("#divDisableRadio").show();
            }

        }



        function BindDistrictDDL(provinceId, districtId) {

            var listDistrict = $.grep(listRegion, function (n, i) {
                return n.typeId == 4;
            });
            DDLBindList("#ddlDistrict", listDistrict, "Select One", 0, 0);
            $("#ddlDistrict").val(districtId);
        }

        function BindDistrictDDLDomicile(provinceId, districtId) {
            var listDistrict = $.grep(listRegion, function (n, i) {
                return n.parentId == provinceId;
            });
            DDLBindList("#ddlDomicileDistrict", listDistrict, "Select One", 0, districtId);
        }

        //#region NationalityType
        function BindApplicantInfoDualNational() {
            if (objApplicantInfoDualNational.applicantId > 0) {

                $("#ddlCountry2nd").val(objApplicantInfoDualNational.countryId);

                $("#hfdEmbassy").val("");
                if (objApplicantInfoDualNational.embassyCertificate.length > 0) {

                    $('#imgEmbassy').attr('src', imagesPath + objApplicantInfoDualNational.embassyCertificate);
                    $('#imgEmbassy').show();
                    $('#rmvEmbassy').show();
                    $("#hfdEmbassy").val(objApplicantInfoDualNational.embassyCertificate);
                }

                $("#hfdLanguage").val("");
                if (objApplicantInfoDualNational.languageCertificate.length > 0) {

                    $('#imgLanguage').attr('src', imagesPath + objApplicantInfoDualNational.languageCertificate);
                    $('#imgLanguage').show();
                    $('#rmvLanguage').show();
                    $("#hfdLanguage").val(objApplicantInfoDualNational.languageCertificate);
                }

                $("#hfdPolice").val("");
                if (objApplicantInfoDualNational.policeCertificate.length > 0) {

                    $('#imgPolice').attr('src', imagesPath + objApplicantInfoDualNational.policeCertificate);
                    $('#imgPolice').show();
                    $('#rmvPolice').show();
                    $("#hfdPolice").val(objApplicantInfoDualNational.policeCertificate);
                }

                $("#hfdAffidavit").val("");
                if (objApplicantInfoDualNational.affidavitCertificate.length > 0) {

                    $('#imgAffidavit').attr('src', imagesPath + objApplicantInfoDualNational.affidavitCertificate);
                    $('#imgAffidavit').show();
                    $('#rmvAffidavit').show();
                    $("#hfdAffidavit").val(objApplicantInfoDualNational.affidavitCertificate);
                }
            }
        }

        function NationalityTypeChangeEvent(ctrl) {

            dualNationalityType = ConvertToInt($(ctrl).attr("typeId"));

            $(".divDual").hide();
            $("#ddlCountry2nd").removeClass("required");

            if (dualNationalityType == 1) {
                DDLBindList("#ddlCountry", listCountry);
                $("#ddlCountry").val(countryId);
            }
            else if (dualNationalityType = 2) {
                $("#ddlCountry2nd").empty();
                $("#ddlCountry2nd").addClass("required");
            }
            CountryChangeEvent();
        }

        //#endregion


        function CountryChangeEvent() {

            $(".divDual").hide();
            var countryId = ConvertToInt($("#ddlCountry").val());

            if (countryId > 0) {

                $("#ankForginer").hide();
                $("#divTxtDistrict").hide();
                $("#txtCNIC").removeClass("numeric");
                $("#txtCNIC").val("");
                $("#txtCNICExpiryDate").val("");
                $("#txtCNIC").removeAttr("placeholder");

                if (countryId == 132) {

                    $("#txtCNIC").attr("placeholder", "CNIC");
                    // For Pakistan
                    $("#divDDLDistrict").show();
                    $(".divDomicile").show();
                    $(".divDisable").show();
                    identityType = "CNIC";

                    $(".spnCnic").html("CNIC");
                    $("#spnCnicUpload1").html("CNIC Front Image");
                    $("#spnCnicUpload2").html("CNIC Back Image");

                    $("#txtCNIC").addClass("numeric");
                    $("#txtCNIC").attr("len", "13");

                    ProviceDomicelChangeEvent();
                    var provinceId = ConvertToInt($("#ddlDomicileProvince").val());
                    DDLSetToDefault("ddlDomicileDistrict", 'Select One', 0);
                    if (provinceId > 0)
                        BindDistrictDDLDomicile(provinceId, 0);
                }
                else {

                    $("#txtCNIC").attr("placeholder", "Passport");
                    $("#divTxtDistrict").show();
                    $(".spnCnic").html("Passport");
                    identityType = "Passport";
                    $("#txtCNIC").attr("len", "20");
                    $("#spnCnicUpload1").html("Passport 1st Page");
                    $("#spnCnicUpload2").html("Passport 2nd Page");
                }

                var listCountry2nd = $.grep(listRegion, function (n, i) {
                    return n.value != countryId;
                });
                DDLBindList("#ddlCountry2nd", listCountry2nd);
            }

            if (countryId != 132 || dualNationalityType == 2) {
                $(".divDual").show();
                $(".divDomicile").hide();
                $(".divDisable").hide();
                $("#divDDLDistrict").hide();
                $("#ankForginer").show();
            }
            if (dualNationalityType == 1) {
                $("#divCountry2nd").hide();
            }

        }

        function ProviceDomicelChangeEvent() {

            var provinceId = ConvertToInt($("#ddlDomicileProvince").val());

            $(".divDisable").hide();
            DDLSetToDefault("ddlDomicileDistrict", 'Select One', 0);

            if (provinceId == 196)
                $(".divDisable").show();

            if (provinceId > 0)
                BindDistrictDDLDomicile(provinceId, 0);

            DisableChangeEvent();
        }

        function DisableChangeEvent() {
            var attrId = $('input:radio[name="rbtndisable"]:checked').attr("id");
            if (attrId == "rbtnDisableYes") {
                $("#divDisable").show();
            }
            else if (attrId == "rbtnDisableNo") {
                $("#divDisable").hide();
            }
        }

        /* Save Information
        ********************************************************************************/

        function SaveAndProceed() {

            objApplicantInfo = ValidateFormInfo();

            if (objApplicantInfo.isError == false) {

                if (IsExistCNIC() == false) {
                    var resp = CallActionPost("/ApplicantProfile/ApplicantInfoAddUpdate", objApplicantInfo);
                    if (resp != null && resp.status == true) {

                        if (resp.id < 8 && objApplicantInfoDualNational.countryId > 0) {
                            try {
                                var respDual = CallActionPost("/ApplicantProfile/ApplicantInfoAddUpdateDualNational", objApplicantInfoDualNational);
                            } catch (e) {
                            }
                            window.location = "/applicant-education";
                        }
                        else {
                            window.location = "/applicant-education";
                        }
                    }
                    else {
                        window.location = "/applicant-profile-create";
                    }
                }
            }

        }

        function ValidateFormInfo() {

            var isOk = true;
            var isError = false, disableId = 1, ctrl = "";
            objApplicantInfo = {};
            objApplicantInfoDualNational = {};

            $(".req-fld").removeClass("req-fld");
            $(".lbl-err").hide();
            // Set Length Of all Control that containt class lenth
            TrimLengthCtrl();

            debugger;
            isOk = ValidateCheck("formProfile");

            if (isOk) {


            }


            /* Get Values
           *****************************************************************************/


            objApplicantInfo.fatherName = ToMaxLength(ConvertToString($("#txtFatherName").val()), 70);
            objApplicantInfo.genderId = ConvertToInt($("#ddlGender").val());

            objApplicantInfo.dob = "";
            if (ValidateDate("txtDob")) {
                objApplicantInfo.dob = ConvertToString($("#txtDob").val());
            }

            objApplicantInfo.pmdcExpiryDate = "";
            if (ValidateDate("txtExpiryDatePMDC")) {
                objApplicantInfo.pmdcExpiryDate = ConvertToString($("#txtExpiryDatePMDC").val());
            }

            objApplicantInfo.mbbsPassingDate = "";
            if (ValidateDate("txtDateOfPassingMBBS")) {
                objApplicantInfo.mbbsPassingDate = ConvertToString($("#txtDateOfPassingMBBS").val());
            }


            objApplicantInfo.countryIdDegreePassing = ConvertToInt($("#ddlCountryDegree").val());


            if ($("#rbtnNationalityTypeSingle").is(':checked'))
                dualNationalityType = 1;
            else if ($("#rbtnNationalityTypeDual").is(':checked'))
                dualNationalityType = 2;

            objApplicantInfo.dualNationalityType = dualNationalityType;

            objApplicantInfo.countryId = ConvertToInt($("#ddlCountry").val());

            objApplicantInfo.districtId = 0;
            objApplicantInfo.districtName = "";
            objApplicantInfo.domicileProvinceId = 0;
            objApplicantInfo.domicileDistrictId = 0;
            objApplicantInfo.domicilePicFront = "";
            objApplicantInfo.domicilePicBack = "";

            if (objApplicantInfo.countryId == 132) {
                // Pakistan
                objApplicantInfo.districtId = ConvertToInt($("#ddlDistrict").val());
                objApplicantInfo.districtName = "";
                objApplicantInfo.domicileProvinceId = $("#ddlDomicileProvince").val();
                objApplicantInfo.domicileDistrictId = $("#ddlDomicileDistrict").val();

                if ($("#flDomicileFront").val()) {
                    objApplicantInfo.domicilePicFront = UploadImage("flDomicileFront", applicantId, "DomicileFront");
                    $("#hfdDomicileFront").val(objApplicantInfo.domicilePicFront);
                }
                objApplicantInfo.domicilePicFront = ConvertToString($("#hfdDomicileFront").val());

                //if ($("#flDomicileBack").val()) {
                //    objApplicantInfo.domicilePicBack = UploadImage("flDomicileBack", applicantId, "DomicileBack");
                //    $("#hfdDomicileBack").val(objApplicantInfo.domicilePicBack);
                //}
                //objApplicantInfo.domicilePicBack = ConvertToString($("#hfdDomicileBack").val());
                objApplicantInfo.domicilePicBack = "";
            }
            else {

                objApplicantInfo.districtId = 0;
                objApplicantInfo.districtName = ConvertToString($("#txtDistrict").val());
                objApplicantInfo.domicileProvinceId = 0;
                objApplicantInfo.domicileDistrictId = 0;
            }




            objApplicantInfo.address = ConvertToString($("#txtAddress").val());
            objApplicantInfo.cnicNo = ConvertToString($("#txtCNIC").val());

            objApplicantInfo.cnicExpiryDate = "";
            if (ValidateDate("txtCNICExpiryDate")) {
                objApplicantInfo.cnicExpiryDate = ConvertToString($("#txtCNICExpiryDate").val());
            }

            if ($("#flCnicFront").val()) {
                objApplicantInfo.cnicPicFront = UploadImage("flCnicFront", applicantId, "CnicFront");
                $("#hfdCnicFront").val(objApplicantInfo.cnicPicFront);
            }
            objApplicantInfo.cnicPicFront = ConvertToString($("#hfdCnicFront").val());

            if ($("#flCnicBack").val()) {
                objApplicantInfo.cnicPicBack = UploadImage("flCnicBack", applicantId, "CnicBack");
                $("#hfdCnicBack").val(objApplicantInfo.cnicPicBack);
            }
            objApplicantInfo.cnicPicBack = ConvertToString($("#hfdCnicBack").val());

            if ($("#flPic").val()) {
                objApplicantInfo.pic = UploadImage("flPic", applicantId, "pic");
                $("#hfdPic").val(objApplicantInfo.pic);
            }
            objApplicantInfo.pic = ConvertToString($("#hfdPic").val());

            objApplicant.pic = ConvertToString($("#hfdPic").val());

            disableId = 1;
            if (objApplicantInfo.domicileProvinceId == 196) {


                if ($("#rbtnDisableYes").is(':checked'))
                    disableId = 2;
                else if ($("#rbtnDisableNo").is(':checked'))
                    disableId = 1;

                objApplicantInfo.disableImage = "";
                if (disableId == 2) {

                    if ($("#flDisable").val()) {
                        objApplicantInfo.disableImage = UploadImage("flDisable", applicantId, "Disable");
                        $("#hfdDisable").val(objApplicantInfo.disableImage);
                    }
                    objApplicantInfo.disableImage = ConvertToString($("#hfdDisable").val());
                }

            }
            else {
                objApplicantInfo.disableImage = "";
            }

            objApplicantInfo.disableId = disableId;

            objApplicantInfoDualNational.applicantId = applicantId;
            objApplicantInfoDualNational.countryId = 0;
            if (dualNationalityType == 2) {


                objApplicantInfoDualNational.applicantId = applicantId;
                objApplicantInfoDualNational.countryId = ConvertToInt($("#ddlCountry2nd").val());

                if ($("#flEmbassy").val()) {
                    objApplicantInfoDualNational.embassyCertificate = UploadImage("flEmbassy", applicantId, "Embassy");
                    $("#hfdEmbassy").val(objApplicantInfoDualNational.embassyCertificate);
                }
                objApplicantInfoDualNational.embassyCertificate = ConvertToString($("#hfdEmbassy").val());


                if ($("#flLanguage").val()) {
                    objApplicantInfoDualNational.languageCertificate = UploadImage("flLanguage", applicantId, "Language");
                    $("#hfdLanguage").val(objApplicantInfoDualNational.languageCertificate);
                }
                objApplicantInfoDualNational.languageCertificate = ConvertToString($("#hfdLanguage").val());

                if ($("#flPolice").val()) {
                    objApplicantInfoDualNational.policeCertificate = UploadImage("flPolice", applicantId, "Police");
                    $("#hfdPolice").val(objApplicantInfoDualNational.policeCertificate);
                }
                objApplicantInfoDualNational.policeCertificate = ConvertToString($("#hfdPolice").val());

                if ($("#flAffidavit").val()) {
                    objApplicantInfoDualNational.affidavitCertificate = UploadImage("flAffidavit", applicantId, "Affidavit");
                    $("#hfdAffidavit").val(objApplicantInfoDualNational.affidavitCertificate);
                }
                objApplicantInfoDualNational.affidavitCertificate = ConvertToString($("#hfdAffidavit").val());


            }

            /* Verifing
             *****************************************************************************/

            if (objApplicantInfo.fatherName == "") {
                $("#txtFatherName").addClass("req-fld");
                ctrl = "txtFatherName";
                isError = true;
            }
            if (objApplicantInfo.dob == "") {

                $("#txtDob").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtDob";
            }

            if (objApplicantInfo.pmdcExpiryDate == "") {

                $("#txtExpiryDatePMDC").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtExpiryDatePMDC";
            }

            if (objApplicantInfo.mbbsPassingDate == "") {

                $("#txtDateOfPassingMBBS").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtDateOfPassingMBBS";
            }

            if (objApplicantInfo.countryIdDegreePassing == 0) {

                $("#ddlCountryDegree").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "ddlCountryDegree";
            }

            if (objApplicantInfo.countryId == 0) {

                $("#ddlCountry").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "ddlCountry";
            }


            if (objApplicantInfo.countryId == 132) {
                // Pakistan
                if (objApplicantInfo.districtId == 0) {

                    $("#ddlDistrict").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "ddlDistrict";
                }

                if (objApplicantInfo.domicileProvinceId == 0) {

                    $("#ddlDomicileProvince").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "ddlDomicileProvince";
                }

                if (objApplicantInfo.domicileDistrictId == 0) {

                    $("#ddlDomicileDistrict").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "ddlDomicileDistrict";
                }

                if (objApplicantInfo.domicilePicFront == "") {

                    $("#flDomicileFront").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "flDomicileFront";
                }
            }
            else {

                if (objApplicantInfo.districtName == "") {

                    $("#txtDistrict").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "txtDistrict";
                }
            }

            if (objApplicantInfo.address == "") {

                $("#txtAddress").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtAddress";
            }

            if (objApplicantInfo.cnicNo == "") {

                $("#txtCNIC").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtCNIC";
            }
            else {
                if (objApplicantInfo.countryId == 132) {

                    if (objApplicantInfo.cnicNo.length < 13) {
                        $("#txtCNIC").addClass("req-fld");
                        isError = true;
                        if (ctrl == "")
                            ctrl = "txtCNIC";

                        alert("Please enter complete 13 digits");
                    }

                }
                else {

                    if (objApplicantInfo.cnicNo.length < 7) {


                        $("#txtCNIC").addClass("req-fld");
                        isError = true;
                        if (ctrl == "")
                            ctrl = "txtCNIC";

                        alert("Please enter complete passport no");
                    }
                }

            }



            if (objApplicantInfo.cnicExpiryDate == "") {

                $("#txtCNICExpiryDate").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "txtCNICExpiryDate";
            }


            if (objApplicantInfo.cnicPicFront == "") {

                $("#flCnicFront").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "flCnicFront";
            }

            if (objApplicantInfo.cnicPicBack == "") {

                $("#flCnicBack").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "flCnicBack";
            }

            if (objApplicantInfo.pic == "") {

                $("#flPic").addClass("req-fld");
                isError = true;
                if (ctrl == "")
                    ctrl = "flPic";
            }

            if (disableId == 2) {
                if (objApplicantInfo.disableImage == "") {

                    $("#flDisable").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "flDisable";
                }
            }

            if (dualNationalityType == 2) {

                if (objApplicantInfoDualNational.countryId == 0) {

                    $("#ddlCountry2nd").addClass("req-fld");
                    isError = true;
                    if (ctrl == "")
                        ctrl = "ddlCountry2nd";
                }
            }

            if (ctrl != "")
                $("#" + ctrl).focus();

            objApplicantInfo.isError = isError;

            return objApplicantInfo;
        }

        function IsExistCNIC() {

            var isExist = false;
            try {
                var obj = {};
                obj.id = applicantId;
                obj.search = $("#txtCNIC").val();
                obj.condition = "CNIC";

                var resp = CallActionPost("/LoggedIn/ApplicantIsExist", obj)
                if (resp != null && resp.id > 0) {
                    isExist = true;
                    alert(identityType + " alredy exists. Please try another.")
                } else {
                    isExist = false;
                }
            } catch (e) {
                isExist = false;
            }

            return isExist;
        }

    </script>
}
<div class="container divProfile" style="margin-bottom:60px;">
    <div class="row main">
        <div class="col-sm-12 form-box">
            <div class="main-login main-center">
                <div class="row">
                    <div class="col-sm-12">
                        <form id="formProfile">
                            @Html.Partial("_ProfileLinks")
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Applicant Name <span style="color:red">*</span></label>
                                    <input type="text" name="txtName" id="txtName" class="form-control required alpha lenth" len="70" placeholder="First Name" tabindex="2" readonly="readonly">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Father/Husband Name <span style="color:red">*</span></label>
                                    <input type="text" name="txtFatherName" id="txtFatherName" class="form-control required alpha lenth" len="70" placeholder="Father/Husband Name" tabindex="3">
                                    <div id="txtFatherNameCount" class="txt-len-count">0</div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Gender   <span style="color:red">*</span></label>
                                    <select required="required" name="ddlGender" id="ddlGender" class="form-control required" tabindex="4">
                                        <option selected="selected" value="1">Male</option>
                                        <option value="2">Female</option>
                                        <option value="3">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for="lbl-err"> Date of Birth <span style="color:red">*</span> <span id="spnDob" class="lbl-err" style="display:none;">Invalid date</span> </label>
                                    <input type="text" name="dob" id="txtDob" class="form-control datepicker dated required" tabindex="5">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Date of Graduation (MBBS/BDS) <span style="color:red">*</span> <span id="spnDateOfPassingMBBS" class="lbl-err" style="display:none;">Invalid date</span></label>
                                    <input type="text" maxlength="11" name="txtDateOfPassingMBBS" id="txtDateOfPassingMBBS" class="datepicker form-control dated required" tabindex="6">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Country of Graduation (MBBS/BDS) <span style="color:red">*</span></label>
                                    <select class="form-control" name="ddlCountryDegree required" id="ddlCountryDegree" tabindex="7">
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Email <span style="color:red">*</span></label>
                                    <input readonly="readonly" type="text" name="txtEmail" id="txtEmail" class="form-control required lenth" len="200">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for="">Contact <span style="color:red">*</span></label>
                                    <input type="text" name="txtContactNo" id="txtContactNo" class="form-control required lenth" len="11" readonly="readonly">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">

                                    <label for="">PMDC/PMC License Number <span style="color:red">*</span></label>
                                    <input type="text" id="txtPMDCNo" name="txtPMDCNo" class="form-control required lenth" len="15" placeholder="PMDC Number" readonly="readonly">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> PMDC/PMC License Validity Till <span style="color:red">*</span> <span id="spnExpiryDatePMDC" class="lbl-err" style="display:none;">Invalid date</span></label>
                                    <input type="text" class="form-control required datepicker dated" name="txtExpiryDatePMDC" id="txtExpiryDatePMDC" tabindex="8">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> Nationality Type of Applicant  <span style="color:red">*</span></label> <br>
                                    <label><input type="radio" name="rbtnNationalityType" id="rbtnNationalityTypeSingle" value="S" typeId="1" checked onchange="NationalityTypeChangeEvent(this)"> Single &nbsp;&nbsp;</label>
                                    <label><input type="radio" name="rbtnNationalityType" id="rbtnNationalityTypeDual" value="D" typeId="2" onchange="NationalityTypeChangeEvent(this)"> Dual  &nbsp;&nbsp;</label>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for="">
                                        Nationality of Applicant <span style="color:red">*</span> <a id="ankForginer" href="/docs/User-Manual-PRP.pdf" target="_blank"
                                                                                                     style="display: none; font-style: italic; font-size: 14px; margin-left: 20px; ">View Detail</a>
                                    </label>
                                    <select class="form-control required ddl-event" name="ddlCountry" id="ddlCountry" fn="CountryChangeEvent" tabindex="7">
                                    </select>
                                </div>
                            </div>
                            <div id="divCountry2nd" class="col-xs-12 col-sm-4 col-md-4 divDual" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Nationality 2nd <span style="color:red">*</span></label>
                                    <select class="form-control" name="ddlCountry2nd" id="ddlCountry2nd" tabindex="7">
                                    </select>
                                </div>
                            </div>
                            <div id="divTxtDistrict" class="col-xs-12 col-sm-4 col-md-4" style="display:none">
                                <div class="form-group">
                                    <label for=""> District of Resident <span style="color:red">*</span></label>
                                    <input type="text" name="txtDistrict" id="txtDistrict" class="form-control lenth" len="100" placeholder="District" tabindex="9" />
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""><span class="spnCnic"> CNIC</span> <span> Number</span><span style="color:red">*</span>  <small>(Without dashes) </small></label>
                                    <input type="text" name="txtCNIC" id="txtCNIC" class="form-control required lenth numeric" len="13" placeholder="CNIC" tabindex="9" />
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> <span class="spnCnic"> CNIC </span><span> Expiry Date</span> <span style="color:red">*</span> <span id="spnCNICExpiryDate" class="lbl-err" style="display:none;">Invalid date</span></label>
                                    <input type="text" name="txtCNICExpiryDate" id="txtCNICExpiryDate" class="form-control required datepicker dated" tabindex="10">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4 divDomicile">
                                <div class="form-group">
                                    <label for=""> Province of Domicile <span style="color:red">*</span></label>
                                    <select id="ddlDomicileProvince" name="ddlDomicileProvince" class="form-control ddl-event" fn="ProviceDomicelChangeEvent" tabindex="12">
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-4 col-md-4 divDomicile">
                                <div class="form-group">
                                    <label for=""> District of Domicile <span style="color:red">*</span></label>
                                    <select id="ddlDomicileDistrict" name="ddlDomicileDistrict" class="form-control" tabindex="12">
                                        <option value="0" selected="selected"> Select One </option>
                                    </select>
                                </div>
                            </div>
                            <div id="divDisableRadio" class="col-xs-12 col-sm-4 col-md-4 divDisable" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Do you want to apply for disability quota?  <span style="color:red">*</span></label> <br>
                                    <label><input type="radio" name="rbtndisable" id="rbtnDisableYes" value="Y"> Yes &nbsp;&nbsp;</label>
                                    <label><input type="radio" name="rbtndisable" id="rbtnDisableNo" value="N" checked=""> No  &nbsp;&nbsp;</label>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="form-group">
                                    <label for=""> Address  <span style="color:red">*</span></label>
                                    <textarea class="form-control required lenth" len="2000" name="txtAddress" id="txtAddress" tabindex="13"></textarea>
                                    <div id="txtAddressCount" class="txt-len-count">0</div>
                                </div>
                            </div>
                            <div id="divDDLDistrict" class="col-xs-12 col-sm-4 col-md-4">
                                <div class="form-group">
                                    <label for=""> District of Residence <span style="color:red">*</span></label>
                                    <select id="ddlDistrict" name="ddlDistrict" class="form-control" tabindex="12">
                                        <option value="0" selected="selected"> Select One </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <hr><p style="background-color: #e11427;color: #fff;padding: 10px 0px;text-align: center;margin: 0px 0px;font-weight: 600;">  Allowed Upload Image types are jpg or png only with size less then 500 KB each.</p> <hr>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for=""> Profile Image  <span style="color:red">*</span></label>
                                    <input type="file" class="form-control required flup" name="flPic" id="flPic" tabindex="14" />
                                    <input type="hidden" id="hfdPic" value="" />
                                    <img id="imgPic" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvPic" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for=""> <span id="spnCnicUpload1"> CNIC Front side Image</span> <span style="color:red">*</span>  </label>
                                    <input type="file" class="form-control required flup" name="flCnicFront" id="flCnicFront" tabindex="15" />
                                    <input type="hidden" id="hfdCnicFront" value="" />
                                    <img id="imgCnicFront" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvCnicFront" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label for=""> <span id="spnCnicUpload2"> CNIC Back side Image</span> <span style="color:red">*</span>  </label>
                                    <input type="file" class="form-control required flup" name="flCnicBack" id="flCnicBack" tabindex="16" />
                                    <input type="hidden" id="hfdCnicBack" value="" />
                                    <img id="imgCnicBack" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvCnicBack" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4 divDomicile">
                                <div class="form-group">
                                    <label for=""> Domicile Front side Image <span style="color:red">*</span> </label>
                                    <input type="file" class="form-control flup" name="flDomicileFront" id="flDomicileFront" tabindex="17" />
                                    <input type="hidden" id="hfdDomicileFront" value="" />
                                    <img id="imgDomicileFront" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvDomicileFront" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Domicile Back Picture <span style="color:red">*</span> </label>
                                    <input type="file" class="form-control flup" name="flDomicileBack" id="flDomicileBack" tabindex="18" />
                                    <input type="hidden" id="hfdDomicileBack" value="" />
                                    <img id="imgDomicileBack" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvDomicileBack" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div id="divDisable" class="col-sm-4 divDisable" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Disable Certificate <span style="color:red">*</span> </label>
                                    <input type="file" class="form-control flup" name="flDisable" id="flDisable" tabindex="18" />
                                    <input type="hidden" id="hfdDisable" value="" />
                                    <img id="imgDisable" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvDisable" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4 divDual" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Embassy Certificate  </label>
                                    <input type="file" class="form-control flup" name="flEmbassy" id="flEmbassy" tabindex="18" />
                                    <input type="hidden" id="hfdEmbassy" value="" />
                                    <img id="imgEmbassy" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvEmbassy" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4 divDual" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Language Certificate  </label>
                                    <input type="file" class="form-control flup" name="flLanguage" id="flLanguage" tabindex="18" />
                                    <input type="hidden" id="hfdLanguage" value="" />
                                    <img id="imgLanguage" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvLanguage" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4 divDual" style="display:none;">
                                <div class="form-group">
                                    <label for=""> Police Certificate  </label>
                                    <input type="file" class="form-control flup" name="flPolice" id="flPolice" tabindex="18" />
                                    <input type="hidden" id="hfdPolice" value="" />
                                    <img id="imgPolice" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvPolice" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-4 divDual" style="display:none;">
                                <div class="form-group">
                                    <label for="" style="width:100%; float:left; clear:both;"> Affidavit  </label>
                                    <input type="file" class="form-control flup" name="flAffidavit" id="flAffidavit" tabindex="18" />
                                    <input type="hidden" id="hfdAffidavit" value="" />
                                    <img id="imgAffidavit" class="flup-img" src="" alt="" style="display:none;" />
                                    <a id="rmvAffidavit" class="removeImage" style="display:none;"> <i class="fa fa-window-close"></i> Remove</a>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <span id="btnProfileSave" type="button" class="btn btn-lg mb10 mt5 pull-right btn-red" tabindex="19" onclick="SaveAndProceed();">Save & Continue &nbsp; &nbsp;<i class="fa fa-arrow-right"></i></span>
                            </div>
                        </form>
                    </div>
                    @Html.Partial("_NotePageBottom")
                </div>
            </div>
        </div>
    </div>
</div>

